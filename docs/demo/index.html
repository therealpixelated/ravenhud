<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RavenHUD Demo - Land & Tradepack Simulators</title>
  <link rel="icon" type="image/png" href="../assets/favicon.png">
  <link rel="stylesheet" href="css/demo.css">
  <style>
    /* Demo-specific overrides */
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }

    .demo-banner-top {
      background: linear-gradient(135deg, #c9a959, #b8954a);
      color: #1a1614;
      padding: 12px 24px;
      text-align: center;
      font-weight: 600;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    .demo-banner-top a {
      background: #1a1614;
      color: #e8dcc8;
      padding: 8px 16px;
      border-radius: 8px;
      text-decoration: none;
      font-size: 0.9rem;
      transition: all 0.2s;
    }

    .demo-banner-top a:hover {
      background: #2a2420;
      transform: translateY(-1px);
    }

    /* Adjust app to account for demo banner */
    .app {
      min-height: calc(100vh - 50px);
    }

    /* Hide drag region in web */
    .drag-region {
      -webkit-app-region: none;
    }

    /* Hide desktop-only elements */
    .no-drag,
    .opacity-control,
    .reset-countdown,
    .settings-btn,
    .nav-logo {
      display: none !important;
    }

    /* Demo tab styling */
    .tab-button.disabled {
      opacity: 0.4;
      cursor: not-allowed;
      pointer-events: none;
    }

    .tab-button.disabled::after {
      content: ' (Desktop)';
      font-size: 0.7em;
      opacity: 0.7;
    }

    /* Hide dashboard header in demo */
    .dashboard-header {
      display: none;
    }

    /* Toast container */
    #toastContainer {
      position: fixed;
      top: 70px;
      right: 20px;
      z-index: 9999;
    }

    /* Skip link for accessibility */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: #c9a959;
      color: #1a1614;
      padding: 8px 16px;
      z-index: 10000;
      text-decoration: none;
      font-weight: 600;
      transition: top 0.15s ease;
    }

    .skip-link:focus,
    .skip-link:focus-visible {
      top: 0;
    }

    /* Visually hidden - for screen readers only */
    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
  </style>
</head>
<body class="background-gradient">
  <!-- Skip Link for Accessibility -->
  <a href="#tab-land" class="skip-link">Skip to main content</a>

  <!-- Demo Banner -->
  <div class="demo-banner-top" role="banner">
    <span>üéÆ This is a demo preview. Some features are limited.</span>
    <a href="../index.html#download">Download Full App</a>
    <a href="../index.html">‚Üê Back to Home</a>
  </div>

  <!-- Toast Container -->
  <div id="toastContainer" aria-live="polite" aria-atomic="true"></div>

  <main class="app">
    <!-- Tab Navigation -->
    <nav class="top-nav" role="tablist" aria-label="Primary Tabs">
      <button
        type="button"
        id="land-tab"
        class="tab-button active"
        role="tab"
        aria-selected="true"
        aria-controls="tab-land"
        tabindex="0"
        data-tab="land"
      >
        üè° Land Simulator
      </button>
      <button
        type="button"
        id="tradepacks-tab"
        class="tab-button"
        role="tab"
        aria-selected="false"
        aria-controls="tab-tradepacks"
        tabindex="-1"
        data-tab="tradepacks"
      >
        üì¶ Tradepack Calculator
      </button>
      <button
        type="button"
        id="farming-tab"
        class="tab-button"
        role="tab"
        aria-selected="false"
        aria-controls="tab-farming"
        tabindex="-1"
        data-tab="farming"
      >
        üåæ Farming Calculator
      </button>
      <button type="button" class="tab-button disabled" role="tab" aria-selected="false" disabled title="Available in desktop app only" data-tab="trophies">
        üèÜ Trophies (Desktop)
      </button>
      <button type="button" class="tab-button disabled" role="tab" aria-selected="false" disabled title="Available in desktop app only" data-tab="cosmetics">
        üëó Cosmetics (Desktop)
      </button>
      <button type="button" class="tab-button disabled" role="tab" aria-selected="false" disabled title="Available in desktop app only" data-tab="creatures">
        üê∫ Creatures (Desktop)
      </button>
      <button type="button" class="tab-button disabled" role="tab" aria-selected="false" disabled title="Available in desktop app only" data-tab="events">
        ‚ö° Events (Desktop)
      </button>
    </nav>

    <!-- Land Simulator Tab -->
    <section
      id="tab-land"
      class="tab-section active"
      role="tabpanel"
      aria-labelledby="land-tab"
      tabindex="0"
    >
      <div class="land-simulator">
        <!-- Owned Lands Configuration -->
        <div class="owned-lands-config">
          <div class="config-header">
            <h3>Your Owned Lands</h3>
            <span class="total-tiles" id="totalOwnedTiles">0 tiles</span>
          </div>

          <div class="config-grid">
            <!-- Community Lands (checkboxes, max 1 each) -->
            <div class="land-config-section">
              <h4>Community Lands <span class="hint">(1 each max)</span></h4>
              <label class="land-checkbox">
                <input type="checkbox" id="ownSmallCommunity">
                <span class="land-info">
                  <span class="name">Small Community</span>
                  <span class="details">56 tiles ‚Ä¢ 1,120 Silver/day tax</span>
                </span>
              </label>
              <label class="land-checkbox">
                <input type="checkbox" id="ownMediumCommunity">
                <span class="land-info">
                  <span class="name">Medium Community</span>
                  <span class="details">91 tiles ‚Ä¢ 31,200 Silver/day tax</span>
                </span>
              </label>
              <label class="land-checkbox">
                <input type="checkbox" id="ownLargeCommunity">
                <span class="land-info">
                  <span class="name">Large Community</span>
                  <span class="details">130 tiles ‚Ä¢ 46,240 Silver/day tax</span>
                </span>
              </label>
            </div>

            <!-- NFT Lands (number inputs, max 7 total combined) -->
            <div class="land-config-section">
              <h4>NFT Lands <span class="hint">(<span id="nftLandCount">0</span>/7 owned, no tax)</span></h4>
              <div class="land-input-row">
                <label for="ownNftSmall">Small (10x10)</label>
                <div class="input-with-tiles">
                  <input type="number" id="ownNftSmall" min="0" max="7" value="0" step="1" aria-describedby="nftSmallTiles">
                  <span class="tile-count" id="nftSmallTiles">100 tiles each</span>
                </div>
              </div>
              <div class="land-input-row">
                <label for="ownNftMedium">Medium (12x12)</label>
                <div class="input-with-tiles">
                  <input type="number" id="ownNftMedium" min="0" max="7" value="0" step="1" aria-describedby="nftMediumTiles">
                  <span class="tile-count" id="nftMediumTiles">144 tiles each</span>
                </div>
              </div>
              <div class="land-input-row">
                <label for="ownNftLarge">Large (15x15)</label>
                <div class="input-with-tiles">
                  <input type="number" id="ownNftLarge" min="0" max="7" value="0" step="1" aria-describedby="nftLargeTiles">
                  <span class="tile-count" id="nftLargeTiles">225 tiles each</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="land-controls">
          <div class="control-group">
            <label for="landTypeSelect">Land Type:</label>
            <select id="landTypeSelect">
              <option value="" disabled selected>Select land type...</option>
              <optgroup label="Community Lands">
                <option value="SMALL_COMMUNITY">Small Community (8x7, 56 tiles)</option>
                <option value="MEDIUM_COMMUNITY">Medium Community (L-shaped, 91 tiles)</option>
                <option value="LARGE_COMMUNITY">Large Community (Stepped, 130 tiles)</option>
              </optgroup>
              <optgroup label="NFT Lands">
                <option value="NFT_SMALL">NFT Small (10x10, with house)</option>
                <option value="NFT_MEDIUM">NFT Medium (12x12, with house)</option>
                <option value="NFT_LARGE">NFT Large (15x15, with house)</option>
              </optgroup>
            </select>
          </div>
          <div class="control-actions">
            <button type="button" id="clearGridBtn" class="btn-secondary">Clear Grid</button>
          </div>
        </div>

        <div class="land-layout">
          <div id="landSidebar" class="land-sidebar-container"></div>
          <div class="land-center-area">
            <div id="landGrid" class="land-grid-main"></div>
            <div id="landStats" class="land-stats-panel"></div>
          </div>
          <div id="landOptimized" class="land-optimized-container"></div>
        </div>
      </div>
    </section>

    <!-- Tradepack Calculator Tab -->
    <section
      id="tab-tradepacks"
      class="tab-section"
      role="tabpanel"
      aria-labelledby="tradepacks-tab"
      tabindex="0"
    >
      <div class="container tradepacks-container">
        <!-- Your Lands Summary Panel -->
        <div class="lands-summary-panel">
          <h3>Your Lands</h3>
          <div class="lands-summary-content" id="landsSummaryContent">
            <div class="lands-summary-loading">Loading...</div>
          </div>
          <button type="button" class="btn-small btn-secondary" id="configureLandsBtn">
            Configure Lands
          </button>
        </div>
        <div class="tradepacks-list">
          <h1>Tradepack Calculator</h1>

          <div class="filters">
            <div class="filter-group">
              <label for="tradepackSearch">Search:</label>
              <input
                id="tradepackSearch"
                type="text"
                placeholder="Search tradepacks or materials..."
              />
            </div>
            <div class="filter-group">
              <label for="tradepackSort">Sort By:</label>
              <select id="tradepackSort">
                <option value="name">Name</option>
                <option value="total_cost">Base Value</option>
              </select>
            </div>
          </div>
          <div class="results-count" aria-live="polite">
            Showing <span id="tradepackCount">0</span> tradepacks
          </div>
          <div id="tradepacksListContainer" class="tradepack-items"></div>
        </div>
        <div class="stat-panel tradepacks-panel">
          <h2>Tradepack Details</h2>
          <div id="tradepackDetailPanel">
            <p class="placeholder-text">Select a tradepack to view details and profit calculations</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Farming Calculator Tab -->
    <section
      id="tab-farming"
      class="tab-section"
      role="tabpanel"
      aria-labelledby="farming-tab"
      tabindex="0"
    >
      <div class="container farming-container">
        <!-- Your Lands Summary Panel -->
        <div class="lands-summary-panel">
          <h3>Your Lands</h3>
          <div class="lands-summary-content" id="farmingLandsSummaryContent">
            <div class="lands-summary-loading">Loading...</div>
          </div>
          <button type="button" class="btn-small btn-secondary" id="farmingConfigureLandsBtn">
            Configure Lands
          </button>
        </div>

        <!-- Crop List -->
        <div class="farming-list">
          <h1>Farming Calculator</h1>

          <div class="farming-filters">
            <div class="farming-search">
              <label for="cropSearch" class="visually-hidden">Search crops</label>
              <input
                type="text"
                id="cropSearch"
                placeholder="Search crops..."
              />
            </div>
            <div class="farming-category">
              <label for="cropCategoryFilter" class="visually-hidden">Filter by category</label>
              <select id="cropCategoryFilter">
                <option value="all">All Categories</option>
                <option value="farming">Farming</option>
                <option value="husbandry">Husbandry</option>
                <option value="herbalism">Herbalism</option>
                <option value="Woodcutting">Woodcutting</option>
              </select>
            </div>
          </div>
          <div id="cropItems">
            <div class="loading-state">Loading crops...</div>
          </div>
        </div>

        <!-- Selection Panel -->
        <div class="farming-panel" id="farmingPanel">
          <h2>Selected Crops</h2>
          <div id="farmingSelectionPanel">
            <p class="placeholder-text">Select crops to view farming simulation</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Scripts - Load in correct order with defer -->
  <!-- Utilities first -->
  <script src="js/utils/debounce.js" defer></script>
  <script src="js/utils/ui-helpers.js" defer></script>
  <script src="js/utils/crop-icons.js" defer></script>
  <script src="js/utils/constants.js" defer></script>
  <script src="js/utils/land-layout-utils.js" defer></script>

  <!-- Components -->
  <script src="js/components/material-tooltip.js" defer></script>
  <script src="js/components/land-grid.js" defer></script>
  <script src="js/components/land-sidebar.js" defer></script>
  <script src="js/components/land-optimized.js" defer></script>

  <!-- Handlers (browser-compatible ports) -->
  <script src="js/handlers/land-handlers.js" defer></script>

  <!-- API Mock (must load after handlers) -->
  <script src="js/api-mock.js" defer></script>

  <!-- Main modules -->
  <script src="js/tabs.js" defer></script>
  <script src="js/land.js" defer></script>
  <script src="js/tradepacks.js" defer></script>
  <script src="js/farming.js" defer></script>
</body>
</html>
